syntax = "proto3";

package order;

message User {
  string id = 1;
  int64 date_birth = 2;
}

message Product {
  string id = 1;
  float price = 2;
}

message Discount {
  float percentage = 1;
  float discount = 2;
}

message Order {
  repeated Product products = 1;
  User user = 2;
}

message OrderWithDiscount {
  message Product {
    Product product = 1;
    Discount discount = 2;
  }
}

service DiscountService {
  rpc CalculateOrderDiscount(Order) returns (OrderWithDiscount);
}